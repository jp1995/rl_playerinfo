<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="assets/main.css">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let titletransition = document.querySelector(".title");
            setTimeout(function() {
                titletransition.classList.add("visible");
            }, 100);
        });
    </script>
</head>
<body>

<!--    <h1>rockt leauge stat</h1>-->
    <div class="topnav">
        <img class="rl_icon" src="assets/icons/rl.svg" alt="rocket league">
        <a href="/"><button class="topnavbutton"><img class="play" src="assets/icons/play2.png" alt="play"><p class="title"></p></button></a>
        <a href="https://github.com/jp1995/rl_playerinfo"><img class="github" src="assets/icons/github.svg" alt="github"></a>
    </div>
    <div class="inlinetables">
        <div class="trackertable">
        </div>
        <div class="mmrtable">
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            // Function to update MMR data
            function updateMMR() {
                $.ajax({
                    url: '/update_mmr',
                    type: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        // Update the content of mmr.html element
                        $('.mmrtable').html(data.html);
                    }
                });
            }

            // Function to update playlist data
            function updatePlaylist() {
                $.ajax({
                    url: '/update_playlist',
                    type: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        // Update the content of playlist.html element
                        $('.title').html(data.html);
                    }
                });
            }

            // Function to update match data
            function updateMatch() {
                $.ajax({
                    url: '/update_match',
                    type: 'GET',
                    dataType: 'json',
                    success: function(data) {
                        // Update the content of playlist.html element
                        $('.trackertable').html(data.html);
                    }
                });
            }

            // Call the updateMMR and updatePlaylist functions
            let mmrData = "{{ mmrData }}";
            let matchData = "{{ matchData }}";

            updateMMR();
            updateMatch();
            updatePlaylist();

        });
    </script>
</body>
</html>